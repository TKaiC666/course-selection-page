<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>drag and drop test</title>
    <link rel="stylesheet" href="css/jquery-ui.min.css">
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <style>
        html,body{
            font-family: Microsoft JhengHei;
            margin: 10px;
            padding: 0;
        }
        
        #containmentWrapper{
            width: 600px;
            height: 600px;
            padding: 10px;
            background-color: darkcyan;
        }
        
        .dragstuff{
            width: 200px;
            border: 5px dotted black;
            padding: 5px;
        }
    </style>
    <script>
        $(function(){
            var $start_counter = $('.event-start'),
                $drag_counter = $('.event-drag'),
                $stop_counter = $('.event-stop'),
                counts = [0,0,0];
            
            $('#draggable').draggable({
                containment:'#containmentWrapper',
                cursor:'crosshair',
                cursorAt:{top:55, left:50},
                start:function(){
                    counts[0]++;
                    updateCounterStatus($start_counter,counts[0]);
                },
                drag:function(){
                    counts[1]++;
                    updateCounterStatus($drag_counter,counts[1]);
                },
                stop:function(){
                    counts[2]++;
                    updateCounterStatus($stop_counter,counts[2]);
                }
            });
            
            function updateCounterStatus( $event_counter, new_count ) {
                // first update the status visually...
                if ( !$event_counter.hasClass( "ui-state-hover" ) ) {
                    $event_counter.addClass( "ui-state-hover" )
                  .siblings().removeClass( "ui-state-hover" );
                }
                // ...then update the numbers
                $( "span.count", $event_counter ).text( new_count );
            }
            
            $('#draggable1').draggable({
                containment:'#containmentWrapper',
                cursor:'crosshair',
                revert:"invalid",
                helper:"clone",
                connectToSortable:"#sortable"
            });
            
            $('#draggable2').draggable({
                snap:'#snapTarget'
            });
            
            $('#sortable').sortable({
                cursor:"crosshair"
            });
            
            $('ul, li').disableSelection();
            
        });
    </script>
</head>
<body>
   <div id="containmentWrapper">
        <div id="draggable" class="dragstuff">
            <p>JQuery UI 事件偵測</p>
            <ul>
                <li class="event-start">"start" invoked <span class="count">0</span>x</li>
                <li class="event-drag">"drag" invoked <span class="count">0</span>x</li>
                <li class="event-stop">"stop" invoked <span class="count">0</span>x</li>
            </ul>
        </div>
        <li id="draggable1">Test of drag and sort</li>
        <ul id="sortable">
            <li>Item1</li>
            <li>Item2</li>
            <li>Item3</li>
            <li>Item4</li>
            <li>Item5</li>
        </ul>
   </div>
   <div id="snapTarget" style="width: 300px;height: 300px;border: 2px solid black">
       <div id="draggable2" class="dragstuff">Test of snap</div>
   </div>
</body>
</html>